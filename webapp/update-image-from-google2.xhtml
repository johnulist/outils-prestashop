<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">
<f:metadata>
	<f:event type="preRenderView"
		listener="#{updateImgPictureFromGoogleController.init}" />
</f:metadata>

<f:view contentType="text/html">
	<h:head>
		<f:facet name="first">
			<meta http-equiv="X-UA-Compatible" content="EmulateIE8" />
			<meta content='text/html; charset=UTF-8' http-equiv="Content-Type" />
			<title>Upyourbizz - Mise à jour image</title>
		</f:facet>

		<link type="text/css" rel="stylesheet"
			href="#{request.contextPath}/css/default.css" />
		<link type="text/css" rel="stylesheet"
			href="#{request.contextPath}/css/syntaxhighlighter/syntaxhighlighter.css" />

	</h:head>
	<h:form id="form">

		<p:panel id="panel" header="Sélection du produit">
			<p:dataTable id="productsTable" var="product"
				rowKey="#{product.productId}"
				value="#{updateImgPictureFromGoogleModel.productInfoList}"
				selection="#{updateImgPictureFromGoogleModel.selectedProduct}"
				selectionMode="single">

				<p:ajax event="rowSelect" update=":form:display"
					oncomplete="productDialog.show()" />

				<f:facet name="header">
            		Liste des produits
        		</f:facet>

				<p:column style="width:10%">
					<p:graphicImage url="#{product.url}" width="60px" heigth="60px" />
				</p:column>

				<p:column style="width:22%">
					<f:facet name="header">
                    	Id produit
            		</f:facet>
					<h:outputText value="#{product.productId}" />
				</p:column>

				<p:column style="width:22%">
					<f:facet name="header">
                    	Catégorie
            		</f:facet>
					<h:outputText value="#{product.categoryName}" />
				</p:column>

				<p:column style="width:22%">
					<f:facet name="header">
                    	Nom produit
            		</f:facet>
					<h:outputText value="#{product.productName}" />
				</p:column>

				<p:column style="width:22%">
					<f:facet name="header">
                    	Id image
            		</f:facet>
					<h:outputText value="#{product.imageId}" />
				</p:column>
			</p:dataTable>

			<!-- <p:dialog id="display" header="Choix image produit" widgetVar="productDialog"
				resizable="false" width="600" showEffect="explode"
				hideEffect="explode" dynamic="false">
				<p:panel>
					<p:galleria value="#{updateImgPictureFromGoogleModel.selectedProduct.googleImgUrls}" var="googleImgUrl"
						panelWidth="500" panelHeight="313" widgetVar="galleria"
						showCaption="true">
						<p:graphicImage url="#{googleImgUrl}"
							alt="Image Description for #{googleImgUrl}"
							title="#{googleImgUrl}" />
					</p:galleria>
				</p:panel>
			</p:dialog> -->
			<p:dialog id="display" widgetVar="productDialog" resizable="false"
				modal="true" dynamic="false">
				<p:galleria id="myGalleriaId" value="#{updateImgPictureFromGoogleModel.selectedProduct.googleImgUrls}"
					var="image" transitionInterval="0" panelWidth="640"
					panelHeight="480">
					<p:graphicImage value="#{image}" />
				</p:galleria>
			</p:dialog>

			<h:outputLabel for="goToIdProduct" value="Aller à l'article n°" />
			<p:inputText id="goToIdProduct"
				value="#{updateImgPictureFromGoogleModel.goToIdProduct}"
				required="true" label="Id du produit">
				<f:convertNumber integerOnly="true" type="number" />
			</p:inputText>
			<p:commandButton
				actionListener="#{updateImgPictureFromGoogleController.goToProducts}"
				update="panel" value="Ok" />
			<p:message for="goToIdProduct" />
			<p:commandButton
				actionListener="#{updateImgPictureFromGoogleController.previousProducts}"
				update="panel" value="Précédent" width="150px" />
			<p:commandButton
				actionListener="#{updateImgPictureFromGoogleController.nextProducts}"
				update="panel" value="Suivant" width="150px" />
		</p:panel>
	</h:form>
	<h:body>
	</h:body>
</f:view>

</html>
